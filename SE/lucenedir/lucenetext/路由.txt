路由

路由（routing）就是通过互联的网络把信息从源地址传输到目的地址的活动。路由发生在OSI网络参考模型中的第三层即网络层。

路由引导分组转送，经过一些中间的节点后，到它们最后的目的地。作成硬体的话，则称为路由器。路由通常根据路由表——一个储存到各个目的地的最佳路径的表——来引导分组转送。因此为了有效率的转送分组，建立储存在路由器记忆体内的路由表是非常重要的。

路由与桥接的不同，在于路由假设位址相似的节点距离相近。这使得路由表中的一项纪录可以表示到一群位址的路径。因此，在大型网路中，路由优于桥接，且路由已经成为网际网路上寻找路径的最主要方法。

较小的网路通常可以手动设定路由表，但较大且拥有复杂拓扑的网路可能常常变化，若要手动建立路由表是不切实际的。尽管如此，大多数的公共交换电话网路（PSTN）仍然使用预先计算好的路由表，在直接连线的路径断线时才使用预备的路径；见公共交换电话网-{路由}-。「动态路由」尝试按照由路由协定所携带的资讯来自动建立路由表以解决这个问题，也让网路能够近自主地避免网路断线或失败。

动态路由目前主宰了整个网际网路。然而，设定路由协定常须要经验与技术；目前的网路技术还没有发展到能够全自动地设定路由。

分组交换网路（例如网际网路）将资料分割成许多带有完整目的地位址的分组，每个分组单独转送。而电路交换网路（例如公共交换电话网路）同样使用路由来找到一条路径，让接下来的资料能在仅带有部份目的地位址的情况下也能够抵达正确的目的地。

若某个设定好的路径无法使用时，现存的节点必须决定另一个传送资料到目的地的路径。他们通常使用以下两种形式的路由协定来达成：距离向量演算法与连线状态演算法。所有路由演算法几乎都可以分类到这两种演算法中。

距离向量演算法使用Bellman-Ford演算法。对于每一条网路上节点间的路径，演算法指定一个「成本」给它们。节点会选择一条总成本（经过路径的所有成本总和）最低的路径，用来把资料从节点甲送到节点乙。

此演算法非常的简单。当某节点初次启动时，将只知道它的邻居节点（直接连接到该节点的节点）与到该节点的成本。（这些资讯、目的地列表、每个目的地的总成本，以及到某个目的地所必须经过的「下一个节点」，构成路由表，或称距离表。）每个节点定时地将目前所知，到各个目的地的成本的资讯，送给每个邻居节点。邻居节点则检查这些资讯，并跟目前所知的资讯做比较；如果到某个目的地的成本比目前所知的低，则将收到的资讯加入自己的路由表。经过一段时间后，网路上得所有节点将会了解到所有目的地的最佳「下一个节点」与最低的总成本。

当某个节点断线时，每个将它当作某条路径的「下一个节点」的节点会将该路由资讯舍弃，再建立新的路由表资讯。接著，他们将这些资讯告诉所有相邻的节点，再找出到所有可抵达的目的地之新路径。

在连线状态演算法中，每个节点拥有网路的图谱（一个图）。每个节点将自己可以连接到的其他节点资讯传送到网路上所有的节点，而其他节点接著各自将这个资讯加入到图谱中。每个路由器即可根据这个图谱来决定从自己到其它节点的最佳路径。

完成这个动作的演算法——Dijkstra演算法——建立另一种资料结构——树。节点产生的树将自己视为根节点，且最后这棵树将会包含了网路中所有其他的节点。一开始，此树只有根节点（节点自己）。接著在树中已有的节点的邻居节点且不存在树中的节点集合中，选取一个成本最低的节点加入此树，直到所有节点都存入树中为止。

这棵树即用来建立路由表、提供最佳的「下一个节点」等，让节点能跟网路中其它节点通讯。

在小型网路中，距离向量路由协定十分简单且有效率，且只需要一些管理。然而，它们的规模性不好，且
收敛性质也十分差，因此促进了较复杂但规模性较好的连线状态路由协定的开发，以使用在较大型的网路。距离向量路由协定也有无限计数问题（见）。

连线状态路由协定的主要优点是在限制的时间内，对于连线改变（例如断线）的反应较快。而且连线状态路由协定在网路上所传送的封包也比距离向量路由协定的封包小。距离向量路由协定必须传送一个节点的整个路由表，但连线状态路由协定的封包只需要传输该节点的邻居节点资讯即可。因此，这些封包小到不会占用可观的网路资源。连线状态路由协定的主要缺点则是比距离向量路由协定需要较多的储存空间与较强的计算能力。

有时路由协定与可被绕送协定常会令人混淆：



虽然动态路由可能非常复杂，但它使得网际网路十分有弹性，且让网际网路的规模自从采用IP以后成长了超过八个数量级。

路由度量（routing metric）包含了被路由演算法使用来决定哪一条路径较另一条路径好的所有数值。度量可能包括许多资讯，例如频宽、延迟、经过节点数、路径成本、负载、MTU、可靠性及传输成本等。路由表只储存最佳的可能路径，但连线状态或拓扑资料库可能储存其他相关的资讯。

当路由器从不同的路由协定里发现有多个能抵达相同目的地的不同路径时，它们使用称为管理距离（administrative distance）的特性来选择最佳的路径。管理距离定义了路由协定的可靠程度。每个路由协定按照管理距离值，由最可靠到最不可靠排列来区分优先顺序。

依照路由器与其他自治系统的关系，有许多种类的路由协定：






